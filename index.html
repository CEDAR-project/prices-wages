<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Wages, Prices and Welfare</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Wages, Prices and Welfare</h1>
      <h2 class="project-tagline">A Web-Integrated Messy Spreadsheet Collection</h2>
    </section>

    <section class="main-content">
      <h3>The Dataset</h3>

      <p>The <a href="http://www.iisg.nl/" target="_blank">International Institute of Social History</a> gathers and publishes an important dataset on <b>historical prices, wages and welfare</b>. The source files of this dataset can be retrieved <a href="http://www.iisg.nl/hpw/data.php" target="_target">here</a>.</p>

      <p>The dataset consists of a collection of disparate Excel files that are very difficult to query in a systematic way. We usually refer to such collection as a <i>messy spreadsheet collection</i> (MSC). An example is shown in the picture below, showing two of such spreadsheets where rice prices of Gambia and Japan in the 19th century can only be compared through laborious data munging.</p>

      <center><img src="img/rice-prices.png"></center>
      
      <h3>Dataset Integration Workflow</h3>

      <p>To integrate this MSC on the Web, we use the <a href="https://github.com/CEDAR-project/Integrator" target="_blank">Integrator</a>, a framework for integrating any kind of MSC using Web technology. The dataset is converted to RDF and integrated using Web vocabularies. The result is served through <a href="http://lod.cedar-project.nl/prices-wages/sparql" target="_blank">this SPARQL endpoint</a> (use the named graphs &lt;urn:graph:prices-wages:raw-data&gt;, &lt;urn:graph:prices-wages:rules&gt; and &lt;urn:graph:prices-wages:release&gt;). The following example query shows the resulting integratinon for a subset of the MSC:</p>

      <pre>PREFIX tablink: &lt;http://bit.ly/cedar-tablink#&gt;
PREFIX cedar: &lt;http://bit.ly/cedar#&gt;
PREFIX qb: &lt;http://purl.org/linked-data/cube#&gt;
PREFIX sdmx-dimension: &lt;http://purl.org/linked-data/sdmx/2009/dimension#&gt;

SELECT ?obs ?year ?good ?price
FROM &lt;urn:graph:prices-wages:release&gt;
WHERE {
    ?obs a qb:Observation ;
         sdmx-dimension:refPeriod ?year ;
         cedar:goodPrice ?good ;
         cedar:population ?price .
}</pre>

      <h4>Data Location Definitions</h4>

      <p>Data in this MSC is arbitrary located in several places of the spreadsheet layout. To precisely define where data observations and dimensions are located, we <b>mark up with styles</b> the source data. A sample of this markup can be found <a href="https://github.com/CEDAR-project/DataDump/tree/prices-wages/source-data" target="_blank">here</a>.</p>

      <h4>Conciliation Rules</h4>

      <p>Dimensions in this MSC are implicitly defined. In order to make them explicit, we generate a set of <b>context-aware conciliation mappings</b> that can be easily written by domain experts. Example mapping files on several dimensions can be found <a href="https://github.com/CEDAR-project/DataDump/tree/prices-wages/mapping" target="_blank">here</a>. A master <a href="https://github.com/CEDAR-project/DataDump/blob/prices-wages/mapping/metadata.txt" target="_blank">metadata file</a> is used as an index to all defined mapping files.</p>

      <h4>Measurement Transformations</h4>

      <p>Data in this MSC needs to be transforomed in order to be fully integrated. To this end, we extend SPARQL into SPARQLSS (SPARQL Speaks Statistics), <b>a Web friendly way of transforming Web data</b> without quiting the Web ecosystem. An example implementation that calculates currency and volume transformations for this MSC can be found <a href="https://github.com/albertmeronyo/stardog-r" target="">here</a>.</p>

      <h4>Error Detection</h4>

      <p>To <b>detect data errors and inconsistencies</b> after the execution of previous stages, we use <a href="http://www.linkededitrules.org/" target="_blank">Linked Edit Rules</a> (LER). LER allow us to encode domain constraints that the data cubes with which the data cubes must be compliant. First, we generate <a href="https://raw.githubusercontent.com/albertmeronyo/linked-edit-rules/master/data/prices-wages-rules.ttl" target="_blank">this set of LER</a> using domain expert knowledge. The results of checking these LER against the data, containing 368 observations that do not meet these LER, are available <a href="http://lod.cedar-project.nl/linked-edit-rules/eval.html#prices-wages-dataset" target="_blank">here</a>.</p>

      <footer class="site-footer">
	&copy; 2015 VU University Amsterdam / Data Archiving and Networked Services (DANS)
      </footer>

    </section>

  
  </body>
</html>

